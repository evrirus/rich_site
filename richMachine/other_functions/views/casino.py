import json
import random


from wsgiref.simple_server import WSGIRequestHandler

from rest_framework.views import APIView

from authentication import SiteAuthentication, TelegramAuthentication
from rest_framework.authentication import SessionAuthentication

from django.contrib import messages

from django.contrib.humanize.templatetags.humanize import intcomma
from django.http import JsonResponse
from django.shortcuts import  render

from django.views import View
from django.views.decorators.csrf import csrf_exempt

from icecream import ic

import requests
from utils import (DOMEN,get_item_by_id,get_messages, give_money,  get_symbol_money)

# from .models import UserToken

coefficients = {
        1: ['ğŸ­', 'ğŸ­', 'ğŸ­'],
        2: ['ğŸ­', 'ğŸ­', 'ğŸ¦„'],
        3: ['ğŸ­', 'ğŸ­', 'ğŸ’µ'],
        4: ['ğŸ­', 'ğŸ­', 'ğŸ¦–'],
        5: ['ğŸ­', 'ğŸ­', 'ğŸ‘»'],
        6: ['ğŸ­', 'ğŸ¦„', 'ğŸ­'],
        7: ['ğŸ­', 'ğŸ¦„', 'ğŸ¦„'],
        8: ['ğŸ­', 'ğŸ¦„', 'ğŸ’µ'],
        9: ['ğŸ­', 'ğŸ¦„', 'ğŸ¦–'],
        10: ['ğŸ­', 'ğŸ¦„', 'ğŸ‘»'],
        11: ['ğŸ­', 'ğŸ’µ', 'ğŸ­'],
        12: ['ğŸ­', 'ğŸ’µ', 'ğŸ¦„'],
        13: ['ğŸ­', 'ğŸ’µ', 'ğŸ’µ'],
        14: ['ğŸ­', 'ğŸ’µ', 'ğŸ¦–'],
        15: ['ğŸ­', 'ğŸ’µ', 'ğŸ‘»'],
        16: ['ğŸ­', 'ğŸ¦–', 'ğŸ­'],
        17: ['ğŸ­', 'ğŸ¦–', 'ğŸ¦„'],
        18: ['ğŸ­', 'ğŸ¦–', 'ğŸ’µ'],
        19: ['ğŸ­', 'ğŸ¦–', 'ğŸ¦–'],
        20: ['ğŸ­', 'ğŸ¦–', 'ğŸ‘»'],
        21: ['ğŸ­', 'ğŸ‘»', 'ğŸ­'],
        22: ['ğŸ­', 'ğŸ‘»', 'ğŸ¦„'],
        23: ['ğŸ­', 'ğŸ‘»', 'ğŸ’µ'],
        24: ['ğŸ­', 'ğŸ‘»', 'ğŸ¦–'],
        25: ['ğŸ­', 'ğŸ‘»', 'ğŸ‘»'],
        26: ['ğŸ¦„', 'ğŸ­', 'ğŸ­'],
        27: ['ğŸ¦„', 'ğŸ­', 'ğŸ¦„'],
        28: ['ğŸ¦„', 'ğŸ­', 'ğŸ’µ'],
        29: ['ğŸ¦„', 'ğŸ­', 'ğŸ¦–'],
        30: ['ğŸ¦„', 'ğŸ­', 'ğŸ‘»'],
        31: ['ğŸ¦„', 'ğŸ¦„', 'ğŸ­'],
        32: ['ğŸ¦„', 'ğŸ¦„', 'ğŸ¦„'],
        33: ['ğŸ¦„', 'ğŸ¦„', 'ğŸ’µ'],
        34: ['ğŸ¦„', 'ğŸ¦„', 'ğŸ¦–'],
        35: ['ğŸ¦„', 'ğŸ¦„', 'ğŸ‘»'],
        36: ['ğŸ¦„', 'ğŸ’µ', 'ğŸ­'],
        37: ['ğŸ¦„', 'ğŸ’µ', 'ğŸ¦„'],
        38: ['ğŸ¦„', 'ğŸ’µ', 'ğŸ’µ'],
        39: ['ğŸ¦„', 'ğŸ’µ', 'ğŸ¦–'],
        40: ['ğŸ¦„', 'ğŸ’µ', 'ğŸ‘»'],
        41: ['ğŸ¦„', 'ğŸ¦–', 'ğŸ­'],
        42: ['ğŸ¦„', 'ğŸ¦–', 'ğŸ¦„'],
        43: ['ğŸ¦„', 'ğŸ¦–', 'ğŸ’µ'],
        44: ['ğŸ¦„', 'ğŸ¦–', 'ğŸ¦–'],
        45: ['ğŸ¦„', 'ğŸ¦–', 'ğŸ‘»'],
        46: ['ğŸ¦„', 'ğŸ‘»', 'ğŸ­'],
        47: ['ğŸ¦„', 'ğŸ‘»', 'ğŸ¦„'],
        48: ['ğŸ¦„', 'ğŸ‘»', 'ğŸ’µ'],
        49: ['ğŸ¦„', 'ğŸ‘»', 'ğŸ¦–'],
        50: ['ğŸ¦„', 'ğŸ‘»', 'ğŸ‘»'],
        51: ['ğŸ’µ', 'ğŸ­', 'ğŸ­'],
        52: ['ğŸ’µ', 'ğŸ­', 'ğŸ¦„'],
        53: ['ğŸ’µ', 'ğŸ­', 'ğŸ’µ'],
        54: ['ğŸ’µ', 'ğŸ­', 'ğŸ¦–'],
        55: ['ğŸ’µ', 'ğŸ­', 'ğŸ‘»'],
        56: ['ğŸ’µ', 'ğŸ¦„', 'ğŸ­'],
        57: ['ğŸ’µ', 'ğŸ¦„', 'ğŸ¦„'],
        58: ['ğŸ’µ', 'ğŸ¦„', 'ğŸ’µ'],
        59: ['ğŸ’µ', 'ğŸ¦„', 'ğŸ¦–'],
        60: ['ğŸ’µ', 'ğŸ¦„', 'ğŸ‘»'],
        61: ['ğŸ’µ', 'ğŸ’µ', 'ğŸ­'],
        62: ['ğŸ’µ', 'ğŸ’µ', 'ğŸ¦„'],
        63: ['ğŸ’µ', 'ğŸ’µ', 'ğŸ’µ'],
        64: ['ğŸ’µ', 'ğŸ’µ', 'ğŸ¦–'],
        65: ['ğŸ’µ', 'ğŸ’µ', 'ğŸ‘»'],
        66: ['ğŸ’µ', 'ğŸ¦–', 'ğŸ­'],
        67: ['ğŸ’µ', 'ğŸ¦–', 'ğŸ¦„'],
        68: ['ğŸ’µ', 'ğŸ¦–', 'ğŸ’µ'],
        69: ['ğŸ’µ', 'ğŸ¦–', 'ğŸ¦–'],
        70: ['ğŸ’µ', 'ğŸ¦–', 'ğŸ‘»'],
        71: ['ğŸ’µ', 'ğŸ‘»', 'ğŸ­'],
        72: ['ğŸ’µ', 'ğŸ‘»', 'ğŸ¦„'],
        73: ['ğŸ’µ', 'ğŸ‘»', 'ğŸ’µ'],
        74: ['ğŸ’µ', 'ğŸ‘»', 'ğŸ¦–'],
        75: ['ğŸ’µ', 'ğŸ‘»', 'ğŸ‘»'],
        76: ['ğŸ¦–', 'ğŸ­', 'ğŸ­'],
        77: ['ğŸ¦–', 'ğŸ­', 'ğŸ¦„'],
        78: ['ğŸ¦–', 'ğŸ­', 'ğŸ’µ'],
        79: ['ğŸ¦–', 'ğŸ­', 'ğŸ¦–'],
        80: ['ğŸ¦–', 'ğŸ­', 'ğŸ‘»'],
        81: ['ğŸ¦–', 'ğŸ¦„', 'ğŸ­'],
        82: ['ğŸ¦–', 'ğŸ¦„', 'ğŸ¦„'],
        83: ['ğŸ¦–', 'ğŸ¦„', 'ğŸ’µ'],
        84: ['ğŸ¦–', 'ğŸ¦„', 'ğŸ¦–'],
        85: ['ğŸ¦–', 'ğŸ¦„', 'ğŸ‘»'],
        86: ['ğŸ¦–', 'ğŸ’µ', 'ğŸ­'],
        87: ['ğŸ¦–', 'ğŸ’µ', 'ğŸ¦„'],
        88: ['ğŸ¦–', 'ğŸ’µ', 'ğŸ’µ'],
        89: ['ğŸ¦–', 'ğŸ’µ', 'ğŸ¦–'],
        90: ['ğŸ¦–', 'ğŸ’µ', 'ğŸ‘»'],
        91: ['ğŸ¦–', 'ğŸ¦–', 'ğŸ­'],
        92: ['ğŸ¦–', 'ğŸ¦–', 'ğŸ¦„'],
        93: ['ğŸ¦–', 'ğŸ¦–', 'ğŸ’µ'],
        94: ['ğŸ¦–', 'ğŸ¦–', 'ğŸ¦–'],
        95: ['ğŸ¦–', 'ğŸ¦–', 'ğŸ‘»'],
        96: ['ğŸ¦–', 'ğŸ‘»', 'ğŸ­'],
        97: ['ğŸ¦–', 'ğŸ‘»', 'ğŸ¦„'],
        98: ['ğŸ¦–', 'ğŸ‘»', 'ğŸ’µ'],
        99: ['ğŸ¦–', 'ğŸ‘»', 'ğŸ¦–'],
        100: ['ğŸ¦–', 'ğŸ‘»', 'ğŸ‘»'],
        101: ['ğŸ‘»', 'ğŸ­', 'ğŸ­'],
        102: ['ğŸ‘»', 'ğŸ­', 'ğŸ¦„'],
        103: ['ğŸ‘»', 'ğŸ­', 'ğŸ’µ'],
        104: ['ğŸ‘»', 'ğŸ­', 'ğŸ¦–'],
        105: ['ğŸ‘»', 'ğŸ­', 'ğŸ‘»'],
        106: ['ğŸ‘»', 'ğŸ¦„', 'ğŸ­'],
        107: ['ğŸ‘»', 'ğŸ¦„', 'ğŸ¦„'],
        108: ['ğŸ‘»', 'ğŸ¦„', 'ğŸ’µ'],
        109: ['ğŸ‘»', 'ğŸ¦„', 'ğŸ¦–'],
        110: ['ğŸ‘»', 'ğŸ¦„', 'ğŸ‘»'],
        111: ['ğŸ‘»', 'ğŸ’µ', 'ğŸ­'],
        112: ['ğŸ‘»', 'ğŸ’µ', 'ğŸ¦„'],
        113: ['ğŸ‘»', 'ğŸ’µ', 'ğŸ’µ'],
        114: ['ğŸ‘»', 'ğŸ’µ', 'ğŸ¦–'],
        115: ['ğŸ‘»', 'ğŸ’µ', 'ğŸ‘»'],
        116: ['ğŸ‘»', 'ğŸ¦–', 'ğŸ­'],
        117: ['ğŸ‘»', 'ğŸ¦–', 'ğŸ¦„'],
        118: ['ğŸ‘»', 'ğŸ¦–', 'ğŸ’µ'],
        119: ['ğŸ‘»', 'ğŸ¦–', 'ğŸ¦–'],
        120: ['ğŸ‘»', 'ğŸ¦–', 'ğŸ‘»'],
        121: ['ğŸ‘»', 'ğŸ‘»', 'ğŸ­'],
        122: ['ğŸ‘»', 'ğŸ‘»', 'ğŸ¦„'],
        123: ['ğŸ‘»', 'ğŸ‘»', 'ğŸ’µ'],
        124: ['ğŸ‘»', 'ğŸ‘»', 'ğŸ¦–'],
        125: ['ğŸ‘»', 'ğŸ‘»', 'ğŸ‘»'],
    }





class MainCasinoView(APIView):
    authentication_classes = [SessionAuthentication, TelegramAuthentication, SiteAuthentication]

    @staticmethod
    def get(request):
        return render(request, 'other_functions/casino_main.html', {'my_server_id': request.user.server_id})


class SlotMachineView(APIView):
    authentication_classes = [SessionAuthentication, TelegramAuthentication, SiteAuthentication]

    @staticmethod
    def get(request):
        return render(request, 'other_functions/casino_slot.html', {'my_server_id': request.user.server_id})

