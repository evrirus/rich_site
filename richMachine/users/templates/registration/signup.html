{% extends "homePage/layout.html" %}

{% block title %}Sign Up{% endblock %}
{% load static %}

{% block stylesheet %}
<link rel="stylesheet" href="{% static 'homePage/styles/signup_style.css' %}">
{% endblock %}

{% block content %}
<div class="frame">
    <p class="main-text">Регистрация</p>
    <div class="form">
        <form id="registrationForm" method="post" onsubmit="return validateForm()">
            {% csrf_token %}
            <input type="text" id="id_username" name="username" placeholder="Логин">
            <input type="password" id="id_password1" name="password1" placeholder="Пароль">
            <input type="password" id="id_password2" name="password2" placeholder="Подтвердите пароль">

            <script async src="https://telegram.org/js/telegram-widget.js?22" data-telegram-login="evrirus_bot" data-size="large" data-onauth="onTelegramAuth(user)" data-request-access="write"></script>

            <button class="button-authorizacia" type="submit">Зарегистрироваться</button>
            <a class="no-account" href="../login">Уже есть аккаунт?</a>
        </form>
        
        <script type="text/javascript">
            function onTelegramAuth(user) {
                alert('Logged in as ' + user.first_name + ' ' + user.last_name + ' (' + user.id + (user.username ? ', @' + user.username : '') + ')');
                document.getElementById('id_telegram_user_id').value = user.id;
            }

            function validateForm() {
                var username = document.getElementById('id_username').value;
                var password1 = document.getElementById('id_password1').value;
                var password2 = document.getElementById('id_password2').value;

                if (!username || !password1 || !password2) {
                    alert('Пожалуйста, заполните все обязательные поля.');
                    return false;
                }

                if (password1 !== password2) {
                    alert('Пароли не совпадают.');
                    return false;
                }

                return true;
            }
        </script>
        
    </div>   
</div>




<img src="{% static 'homePage/img/graffiti1.svg' %}" class="graffiti_one">
<img src="{% static 'homePage/img/graffiti2.svg' %}" class="graffiti_two">
<img src="{% static 'homePage/img/cho_nado.svg' %}" class="graffiti_cho_nado">
{% endblock %}